<!DOCTYPE html>
<html lang="uz">
<head>
    <meta charset="UTF-8">
    <title>Foydalanuvchilar</title>
    <link rel="stylesheet" href="./users.css">

    <!-- SheetJS for Excel Export -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
</head>

<body>

<div class="container">

    <h2>Foydalanuvchilar</h2>

    <!-- FILTER PANEL -->
    <div class="filters">
        <input id="search" type="text" placeholder="Qidiruv: ism, telefon, mashina..." oninput="searchUsers()">

        <select id="filterRole" onchange="applyFilters()">
            <option value="">Role (hammasi)</option>
            <option value="driver">Driver</option>
            <option value="user">User</option>
        </select>

        <select id="filterVerify" onchange="applyFilters()">
            <option value="">Verify holati</option>
            <option value="verified">Tasdiqlangan</option>
            <option value="pending">Kutilmoqda</option>
            <option value="rejected">Rad etilgan</option>
        </select>

        <select id="filterBlocked" onchange="applyFilters()">
            <option value="">Block holati</option>
            <option value="blocked">Blocked</option>
            <option value="active">Active</option>
        </select>

        <button class="btn export" onclick="exportExcel()">Export Excel</button>
    </div>

    <!-- TABLE -->
    <table>
        <thead>
            <tr>
                <th>Ismi</th>
                <th>Telefon</th>
                <th>Hudud</th>
                <th>Role</th>
                <th>Holati</th>
                <th>Amallar</th>
            </tr>
        </thead>
        <tbody id="usersTable"></tbody>
    </table>

    <!-- PAGINATION -->
    <div class="pagination">
        <button id="prevPage" onclick="prevPage()">⬅ Oldingi</button>
        <span id="pageInfo">1 / 1</span>
        <button id="nextPage" onclick="nextPage()">Keyingi ➡</button>
    </div>

</div>

<!-- MODAL -->
<div id="modal">
    <div id="modalContent">

        <h3 id="m_fullName"></h3>

        <img id="m_avatar">

        <p><b>Telefon:</b> <span id="m_phone"></span></p>
        <p><b>Mintaqa:</b> <span id="m_region"></span></p>
        <p><b>Tuman:</b> <span id="m_district"></span></p>

        <h4 style="margin-top:20px;">Mashina ma’lumotlari</h4>
        <p><b>Model:</b> <span id="m_car"></span></p>
        <p><b>Rangi:</b> <span id="m_color"></span></p>
        <p><b>Raqami:</b> <span id="m_number"></span></p>

        <p><b>Holati:</b> <span id="m_status"></span></p>
        <p><b>Balans:</b> <span id="m_balance"></span></p>

        <button onclick="closeModal()" class="btn unblock" style="margin-top:20px">Yopish</button>
    </div>
</div>

<script type="module" src="./users.js"></script>

</body>
</html>
