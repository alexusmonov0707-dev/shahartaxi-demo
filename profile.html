<!DOCTYPE html>
<html lang="uz">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Mening profilim - ShaharTaxi</title>

  <style>
    :root{
      --blue:#007bff;--green:#28a745;--red:#dc3545;--muted:#666;
      --card:#fff;--bg:#f7f9fc;
    }
    body{font-family:Arial,Helvetica,sans-serif;background:var(--bg);margin:0;padding:0;color:#222;}
    header{background:var(--blue);color:#fff;padding:14px 16px;position:relative}
    header h1{margin:0;font-size:20px}
    .logout{position:absolute;right:14px;top:10px;background:var(--red);border:none;padding:8px 12px;border-radius:6px;color:#fff;cursor:pointer}
    .container{max-width:980px;margin:18px auto;padding:16px;background:var(--card);border-radius:10px;box-shadow:0 6px 18px rgba(0,0,0,0.06)}
    h2{color:var(--blue);margin:6px 0 12px 0;text-align:center}
    select,input,textarea{width:100%;padding:8px;border-radius:6px;border:1px solid #ccc;font-size:14px;box-sizing:border-box}
    button{background:var(--blue);color:#fff;border:none;padding:8px 12px;border-radius:8px;cursor:pointer}
    button.secondary{background:#6c757d}
    .ad-box{padding:12px;border-radius:8px;border:1px solid #e6eefc;margin-bottom:10px;background:#fff}
    .date-info{font-size:12px;color:var(--muted);margin-top:6px}
    .modal{display:none;position:fixed;inset:0;background:rgba(0,0,0,0.45);align-items:center;justify-content:center;z-index:9999}
    .modal-content{background:#fff;padding:16px;border-radius:8px;width:360px;max-width:90%}
  </style>
</head>

<body>

  <header>
    <h1>ShaharTaxi — Profil</h1>
    <button class="logout" onclick="logout()">Chiqish</button>
  </header>

  <div class="container">

    <div>
      <div style="display:flex;justify-content:space-between;align-items:center">
        <div>
          <div id="profileName" style="font-size:18px;font-weight:700">Foydalanuvchi</div>
          <div id="profilePhone" style="font-size:13px;color:#777">—</div>
        </div>
        <div style="text-align:center">
          <div id="profileRatingBig" style="font-size:20px;font-weight:bold">—</div>
          <div id="profileRatingCount" style="font-size:13px;color:#777">—</div>
        </div>
      </div>

      <div style="margin-top:10px">
        <button onclick="openEditProfile()" class="secondary">Profilni tahrirlash</button>
      </div>
    </div>

    <hr>

    <h2>Mening e’lonlarim</h2>
    <div id="myAds"></div>

    <hr>

    <h2>Yangi e’lon qo‘shish</h2>

    <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:8px">
      <select id="adType">
        <option value="">E’lon turini tanlang</option>
        <option value="driver">Haydovchi</option>
        <option value="passenger">Yo‘lovchi</option>
      </select>

      <select id="fromRegion" onchange="updateDistricts('from')"></select>
      <select id="fromDistrict"></select>

      <select id="toRegion" onchange="updateDistricts('to')"></select>
      <select id="toDistrict"></select>

      <input id="price" type="number" placeholder="Narx (so'm)" />
    </div>

    <textarea id="adComment" rows="3" style="margin-top:8px" placeholder="Qo‘shimcha izoh"></textarea>

    <div style="margin-top:8px;display:flex;gap:8px">
      <button onclick="addAd()">E’lonni joylash</button>
      <button class="secondary" onclick="clearAddForm()">Tozalash</button>
      <span style="margin-left:auto;font-size:13px;color:#777">⚠️ Admin tasdiqlashi kerak</span>
    </div>

  </div>

  <!-- EDIT PROFILE MODAL -->
  <div id="editProfileModal" class="modal">
    <div class="modal-content">
      <h3>Profilni tahrirlash</h3>
      <input id="editFullName" placeholder="Ism"/>
      <input id="editPhoneInput" placeholder="Telefon" style="margin-top:8px"/>
      <div style="text-align:right;margin-top:10px">
        <button onclick="saveProfileEdit()">Saqlash</button>
        <button onclick="closeEditProfile()" class="secondary">Bekor</button>
      </div>
    </div>
  </div>

  <!-- VIEW PROFILE MODAL -->
  <div id="viewProfileModal" class="modal">
    <div class="modal-content">
      <h3 id="vpName"></h3>
      <div id="vpPhone" style="font-size:13px;color:#777"></div>
      <div id="vpRatingSummary" style="margin-top:8px"></div>
      <div id="vpAdsList" style="max-height:220px;overflow:auto;margin-top:8px"></div>
      <div id="vpRateSection" style="margin-top:12px"></div>
      <div style="margin-top:10px;text-align:right">
        <button onclick="closeViewProfile()">Yopish</button>
      </div>
    </div>
  </div>

  <footer style="text-align:center;color:#777;font-size:13px;margin-top:10px">
    ShaharTaxi — lokal demo
  </footer>

  <!-- **MUHIM** — script to‘g‘ri ishlashi uchun MODULE bo‘lishi shart -->

<script type="module" src="../profile.js?v=10002"></script>



</body>
</html>
