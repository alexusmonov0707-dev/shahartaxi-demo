<!DOCTYPE html>
<html lang="uz">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Mening profilim - ShaharTaxi</title>
  <style>
    /* Soddalashtirilgan lekin toza styling - asl loyihangiz uslubiga moslashtiring */
    body { font-family: Arial, sans-serif; background: #f7f9fc; margin:0; padding:0; }
    header { background:#007bff; color:#fff; padding:15px; text-align:center; position:relative; }
    .logout { position:absolute; right:20px; top:15px; background:#dc3545; border:none; color:#fff; padding:8px 14px; border-radius:5px; cursor:pointer; }
    .container { max-width:900px; margin:20px auto; background:#fff; padding:20px; border-radius:10px; box-shadow:0 0 15px rgba(0,0,0,0.08); }
    h2 { color:#007bff; text-align:center; margin-top:0; }
    input, select, textarea { width:100%; padding:10px; margin:8px 0; border:1px solid #ccc; border-radius:6px; font-size:15px; }
    button { background:#007bff; color:#fff; padding:10px 16px; border-radius:6px; border:none; cursor:pointer; }
    button.secondary { background:#6c757d; }
    .filters { display:grid; grid-template-columns: repeat(auto-fit,minmax(140px,1fr)); gap:8px; margin-bottom:12px; }
    .ad-box { padding:14px; border-radius:8px; margin-bottom:10px; border:1px solid #e6eefc; background:#fff; }
    .ad-box.pending { background:#fbfbfb; }
    .ad-box.approved { background:#e7fff0; }
    .ad-box.rejected { background:#fff0f0; }
    .actions { margin-top:8px; display:flex; gap:8px; flex-wrap:wrap; }
    .date-info { font-size:13px; color:#666; font-style:italic; }
    .comment-box { background:#f8f9ff; padding:8px; border-left:4px solid #007bff; border-radius:6px; margin-top:8px; }
    .info { color:#666; font-size:14px; margin-bottom:8px; }
    .stat-row { display:flex; gap:12px; flex-wrap:wrap; margin-bottom:12px; justify-content:center; }
    .stat-card { background:#007bff; color:#fff; padding:10px 14px; border-radius:8px; min-width:140px; text-align:center; }
    .rating-block { background:#fff; padding:12px; border-radius:8px; border:1px solid #eee; margin-top:16px; }
    .star { cursor:pointer; font-size:20px; margin-right:4px; user-select:none; }
    .small { font-size:13px; color:#666; }
    /* responsive */
    @media (max-width:720px) { .filters { grid-template-columns: 1fr 1fr; } }
  </style>
</head>
<body>
  <header>
    <h1>ShaharTaxi - Profil</h1>
    <button class="logout" onclick="logout()">Chiqish</button>
  </header>

  <div class="container">
    <div id="userPhone" class="info"></div>

    <!-- Statistikalar (profilda istalgancha ma'lumot ko'rsatish mumkin) -->
    <div class="stat-row" id="profileStatsRow" style="display:none;">
      <div class="stat-card" id="myAdsCount">0 e'lon</div>
      <div class="stat-card" style="background:#28a745;" id="myApprovedCount">0 tasdiq</div>
      <div class="stat-card" style="background:#ffc107;color:#000;" id="myPendingCount">0 kutish</div>
      <div class="stat-card" style="background:#dc3545;" id="myRejectedCount">0 rad</div>
    </div>

    <h2>Mening e’lonlarim</h2>

    <div class="filters">
      <select id="typeFilter" onchange="applyFilters()">
        <option value="all">Barcha turlar</option>
        <option value="driver">Haydovchi</option>
        <option value="passenger">Yo‘lovchi</option>
      </select>

      <select id="statusFilter" onchange="applyFilters()">
        <option value="all">Barcha holatlar</option>
        <option value="pending">Kutilmoqda</option>
        <option value="approved">Tasdiqlangan</option>
        <option value="rejected">Rad etilgan</option>
      </select>

      <select id="filterFromRegion" onchange="updateFilterDistricts('filterFrom')">
        <option value="">Qayerdan (viloyat)</option>
      </select>
      <select id="filterFromDistrict"><option value="">Qayerdan (tuman)</option></select>

      <select id="filterToRegion" onchange="updateFilterDistricts('filterTo')">
        <option value="">Qayerga (viloyat)</option>
      </select>
      <select id="filterToDistrict"><option value="">Qayerga (tuman)</option></select>

      <button onclick="clearFilters()">Filterlarni tozalash</button>
    </div>

    <div id="myAds" aria-live="polite"></div>

    <hr>

    <h2>Yangi e’lon qo‘shish</h2>

    <select id="adType"><option value="">E’lon turini tanlang</option><option value="driver">Haydovchi</option><option value="passenger">Yo‘lovchi</option></select>

    <label>Qayerdan (viloyat):</label>
    <select id="fromRegion" onchange="updateDistricts('from')"></select>

    <label>Qayerdan (tuman):</label>
    <select id="fromDistrict"></select>

    <label>Qayerga (viloyat):</label>
    <select id="toRegion" onchange="updateDistricts('to')"></select>

    <label>Qayerga (tuman):</label>
    <select id="toDistrict"></select>

    <input type="number" id="price" placeholder="Narx (so‘m)">
    <textarea id="adComment" rows="3" placeholder="Qo‘shimcha izoh (ixtiyoriy) — faqat siz yozishingiz mumkin"></textarea>

    <button onclick="addAd()">E’lonni joylash</button>

    <!-- Baholash / Rating sektsiyasi (profilga mos) -->
    <div id="profileRatingArea" class="rating-block">
      <h3>Foydalanuvchi baholari</h3>
      <div id="ratingSummary" class="small">Yuklanmoqda...</div>
      <div id="ratingList" style="margin-top:8px;"></div>

      <div id="ratingFormWrap" style="margin-top:12px;"></div>
    </div>

  </div>

  <!-- script alohida faylda bo'lishi uchun profile.js yuklanadi -->
  <script src="profile.js"></script>
  <script src="regions.js"></script>
</body>
</html>
