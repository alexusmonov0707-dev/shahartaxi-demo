<!DOCTYPE html>
<html lang="uz">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Haydovchi paneli – ShaharTaxi</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header>
    <h1>🚖 Haydovchi paneli</h1>
    <a href="index.html" class="btn">⬅️ Yo‘lovchi sahifasiga qaytish</a>
  </header>

  <main class="driver-form">
    <h2>Yangi e’lon qo‘shish</h2>
    <form id="driverForm">
      <label>Qayerdan:</label>
      <input type="text" id="from" placeholder="Masalan: Toshkent" required>

      <label>Qayergacha:</label>
      <input type="text" id="to" placeholder="Masalan: Andijon" required>

      <label>Narx (so‘m):</label>
      <input type="number" id="price" placeholder="150000" required>

      <label>Telefon raqam:</label>
      <input type="tel" id="phone" placeholder="+99890 123 45 67" required>

      <button type="submit" class="btn">E’lonni joylashtirish</button>
    </form>

    <h3>🧾 Sizning e’lonlaringiz</h3>
    <div id="driverAds"></div>
  </main>

  <script>
    const form = document.getElementById("driverForm");
    const adsDiv = document.getElementById("driverAds");

    // Saqlangan e'lonlarni yuklash
    const savedAds = JSON.parse(localStorage.getItem("driverAds")) || [];
    renderAds();

    form.addEventListener("submit", (e) => {
      e.preventDefault();
      const ad = {
        from: form.from.value,
        to: form.to.value,
        price: form.price.value,
        phone: form.phone.value,
      };
      savedAds.push(ad);
      localStorage.setItem("driverAds", JSON.stringify(savedAds));
      renderAds();
      form.reset();
      alert("E’lon muvaffaqiyatli joylashtirildi!");
    });

    function renderAds() {
      adsDiv.innerHTML = "";
      savedAds.forEach((ad, i) => {
        adsDiv.innerHTML += `
          <div class="ad-card">
            <p><strong>${ad.from}</strong> ➡️ <strong>${ad.to}</strong></p>
            <p>${ad.price} so‘m | 📞 ${ad.phone}</p>
            <button onclick="deleteAd(${i})">❌ O‘chirish</button>
          </div>
        `;
      });
    }

    function deleteAd(index) {
      savedAds.splice(index, 1);
      localStorage.setItem("driverAds", JSON.stringify(savedAds));
      renderAds();
    }
  </script>
</body>
</html>
